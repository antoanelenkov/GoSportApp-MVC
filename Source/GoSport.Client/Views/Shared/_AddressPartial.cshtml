@using GoSport.Client.ViewModels
@model AddressViewModel
<div class="form-group">
    @Html.LabelFor(m => m.City, new { @class = "col-md-2 control-label" })
    <div class="col-md-10">
        @Html.DropDownListFor(m => m.City, new SelectList(ViewBag.Cities, "Id", "City"), "None", new { @class = "form-control", id = "city-drop-down" })
    </div>
</div>
<div class="form-group">
    @Html.LabelFor(m => m.Neighborhood, new { @class = "col-md-2 control-label" })
    <div class="col-md-10">
        @Html.DropDownListFor(m => m.Neighborhood, new SelectList(new string[] { }), "None", new { @class = "form-control", id = "neighbour-drop-down" })
    </div>
</div>
<script>
    function getAllNeighbourhoods(city) {
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetAllNeighbours", "Account")',
                dataType: 'json',
                data: JSON.stringify({ city: city }),
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    neighbourhoodsDropDown.html('');

                    if (!data.length) {
                        neighbourhoodsDropDown.append(
                            $('<option></option>').val("None").html("None")
                        );
                    }

                    for (var i = 0; i < data.length; i++) {
                        neighbourhoodsDropDown.append(
                            $('<option></option>').val(data[i].Id).html(data[i].Neighborhood)
                        );
                    }
                },
                error: function (data) {
                    console.log('error: ' + data)
                }
            });
        }
</script>